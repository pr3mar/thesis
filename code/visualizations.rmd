---
title: "Basic Jira visualizations"
author: Marko Prelevikj
output:
    prettydoc::html_pretty:
      highlight: github
      theme: architect
      toc: true
      toc_depth: 3
---

```{r, include = F}
library(ggplot2)
library(tidyr)
library(reshape2)
library(gridExtra)
```

# Introduction

# Diving in

## Breakdown by issue type:

```{r issueTypes, echo = F, results = 'hide'}
breakdownByType <- read.csv(file="../basic_stats/by_type.csv")

priorityTypes <- ggplot(breakdownByType) +
      geom_bar(aes(Issue.type, Count), stat = "identity") +
      geom_bar(aes(Issue.type, Count, fill=Resolved), stat = "identity", position = "dodge") +
      xlab("Issue type") +
      ylab("Count")
priorityTypes
```

## Breakdown by priority:

```{r issuePriority, echo = F, results = 'hide'}

breakdownByPriority <- read.csv(file="../basic_stats/by-priority.csv")

issuePriority <- ggplot(breakdownByPriority) +
      geom_bar(aes(Issue.priority, Count), stat = "identity") +
      geom_bar(aes(Issue.priority, Count, fill=Resolved), stat = "identity", position = "dodge") +
      xlab("Issue priority") + ylab("Count")
issuePriority
```

## Overdue issues:

|Priority|Issues overdue|Avg days overdue|
|---|---|---|
|Blocker|/|/|
|Critical|4|46.50|
|Major|25|155.12|
|Minor|19|59.95|
|Trivial|/|/|

# Resolved issues breakdown

```{r, echo = F, results = 'hide'}
resolvedIssues <- read.csv(file = "../basic_stats/resolved-issues.csv")
```
## Watch count
### By issue type
```{r watchHistograms, echo = F, results = 'hide'}
issueTypes <- unique(resolvedIssues$Issue.Type)
plots <- list()
for (type in issueTypes) {
  data <- resolvedIssues[resolvedIssues$Issue.Type == type,]
  plots[[type]] <- ggplot(data) +
    geom_histogram(aes(x = Watch.Count), binwidth = 1, color="black", fill="red") +
    # scale_x_continuous(breaks = seq(0, 35, 1), labels = seq(0, 35, 1)) +
    ylab("Issue count") +
    xlab("People watching") +
    ggtitle(type) +
    theme(plot.title = element_text(hjust = 0.5))
}

n <- length(plots)
nCol <- floor(sqrt(n))
do.call("grid.arrange", c(plots, ncol=nCol))
```

### By priority
```{r priprotyWatch, echo = F, results = 'hide'}
priorityTypes <- sort(unique(resolvedIssues$Priority))
plots <- list()
for (type in priorityTypes) {
  data <- resolvedIssues[resolvedIssues$Priority == type,]
  plots[[type]] <- ggplot(data) +
    geom_histogram(aes(x = Watch.Count), binwidth = 1, color="black", fill="red") +
    # scale_x_continuous(breaks = seq(0, 35, 1), labels = seq(0, 35, 1)) +
    ylab("Issue count") +
    xlab("People watching") +
    ggtitle(type) +
    theme(plot.title = element_text(hjust = 0.5))
}

n <- length(plots)
nCol <- floor(sqrt(n))
do.call("grid.arrange", c(plots, ncol=nCol))
```

## Number of Comments
### By issue type
```{r commentHistograms, echo = F, results = 'hide'}
issueTypes <- unique(resolvedIssues$Issue.Type)
plots <- list()
for (type in issueTypes) {
  data <- resolvedIssues[resolvedIssues$Issue.Type == type,]
  plots[[type]] <- ggplot(data) +
    geom_histogram(aes(x = Comments.Count), binwidth = 5, color="black", fill="red") +
    # scale_x_continuous(breaks = seq(0, 35, 1), labels = seq(0, 35, 1)) +
    ylab("Issue count") +
    xlab("Comments count") +
    ggtitle(type) +
    theme(plot.title = element_text(hjust = 0.5))
}

n <- length(plots)
nCol <- floor(sqrt(n))
do.call("grid.arrange", c(plots, ncol=nCol))
```

### By priority
```{r priorityComment, echo = F, results = 'hide'}
priorityTypes <- sort(unique(resolvedIssues$Priority))
plots <- list()
for (type in priorityTypes) {
  data <- resolvedIssues[resolvedIssues$Priority == type,]
  plots[[type]] <- ggplot(data) +
    geom_histogram(aes(x = Comments.Count), binwidth = 5, color="black", fill="red") +
    # scale_x_continuous(breaks = seq(0, 35, 1), labels = seq(0, 35, 1)) +
    ylab("Issue count") +
    xlab("Comments count") +
    ggtitle(type) +
    theme(plot.title = element_text(hjust = 0.5))
}

n <- length(plots)
nCol <- floor(sqrt(n))
do.call("grid.arrange", c(plots, ncol=nCol))
```

## Number of changelog items

### By issue type
```{r changelogHistograms, echo = F, results = 'hide'}
issueTypes <- unique(resolvedIssues$Issue.Type)
plots <- list()
for (type in issueTypes) {
  data <- resolvedIssues[resolvedIssues$Issue.Type == type,]
  plots[[type]] <- ggplot(data) +
    geom_histogram(aes(x = Changelog.Count), binwidth = 10, color="black", fill="red") +
    # scale_x_continuous(breaks = seq(0, 35, 1), labels = seq(0, 35, 1)) +
    ylab("Issue count") +
    xlab("Changelog count") +
    ggtitle(type) +
    theme(plot.title = element_text(hjust = 0.5))
}

n <- length(plots)
nCol <- floor(sqrt(n))
do.call("grid.arrange", c(plots, ncol=nCol))
```

### By priority
```{r priorityChangelog, echo = F, results = 'hide'}
priorityTypes <- sort(unique(resolvedIssues$Priority))
plots <- list()
for (type in priorityTypes) {
  data <- resolvedIssues[resolvedIssues$Priority == type,]
  plots[[type]] <- ggplot(data) +
    geom_histogram(aes(x = Changelog.Count), binwidth = 10, color="black", fill="red") +
    # scale_x_continuous(breaks = seq(0, 35, 1), labels = seq(0, 35, 1)) +
    ylab("Issue count") +
    xlab("Changelog count") +
    ggtitle(type) +
    theme(plot.title = element_text(hjust = 0.5))
}

n <- length(plots)
nCol <- floor(sqrt(n))
do.call("grid.arrange", c(plots, ncol=nCol))
```


## Number of days to resolve

### By issue type
```{r dtrTypeHistograms, echo = F, results = 'hide'}
issueTypes <- unique(resolvedIssues$Issue.Type)
plots <- list()
for (type in issueTypes) {
  data <- resolvedIssues[resolvedIssues$Issue.Type == type,]
  plots[[type]] <- ggplot(data) +
    geom_histogram(aes(x = Days.to.resolve), binwidth = 25, color="black", fill="red") +
    # scale_x_continuous(breaks = seq(0, 35, 1), labels = seq(0, 35, 1)) +
    ylab("Issue count") +
    xlab("Days to resolve") +
    ggtitle(type) +
    theme(plot.title = element_text(hjust = 0.5))
}

n <- length(plots)
nCol <- floor(sqrt(n))
do.call("grid.arrange", c(plots, ncol=nCol))
```


### By priority
```{r dtrPriorityHistograms, echo = F, results = 'hide'}
priorityTypes <- sort(unique(resolvedIssues$Priority))
plots <- list()
for (type in priorityTypes) {
  data <- resolvedIssues[resolvedIssues$Priority == type,]
  plots[[type]] <- ggplot(data) +
    geom_histogram(aes(x = Days.to.resolve), binwidth = 25, color="black", fill="red") +
    # scale_x_continuous(breaks = seq(0, 35, 1), labels = seq(0, 35, 1)) +
    ylab("Issue count") +
    xlab("Days to resolve") +
    ggtitle(type) +
    theme(plot.title = element_text(hjust = 0.5))
}

n <- length(plots)
nCol <- floor(sqrt(n))
do.call("grid.arrange", c(plots, ncol=nCol))
```

